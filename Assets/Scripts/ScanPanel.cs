using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using System;

//handles navigation and animation of the scan panel
public class ScanPanel : MonoBehaviour
{

    [SerializeField] private AnomolyManager anomolyManager = null;

    [SerializeField] private Animator scanPanelAnimator = null;

    [SerializeField] private Animator instructionsAnimator = null;
    [SerializeField] private GameObject clickAnywhereButton = null;

    public Action OnCloseScanPanel;


    public void OpenScanPanel()
    {
        gameObject.SetActive(true);
        scanPanelAnimator.SetTrigger("Intro");
    }

    //called from animator
    public void OnScanIntroComplete()
    {
        instructionsAnimator.SetTrigger("Intro");
        clickAnywhereButton.SetActive(true);
    }

    public void CloseScanPanel()
    {
        scanPanelAnimator.SetTrigger("Exit");
    }

    //called from UI
    public void OnClickExit()
    {
        CloseScanPanel();
        anomolyManager.SetScanCircleActive(false);
        SoundManager.Instance.PlayClickSound();
    }

    //called from animator
    public void OnCloseScanCompleted()
    {
        OnCloseScanPanel?.Invoke();
        gameObject.SetActive(false);
    }

    //called from UI
    public void OnConfirmInstructions()
    {
        instructionsAnimator.SetTrigger("Exit");
        anomolyManager.SetScanCircleActive(true);
        clickAnywhereButton.SetActive(false);
        SoundManager.Instance.PlayClickSound();

    }

}
